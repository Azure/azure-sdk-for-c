<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Contributing | Azure SDK for C </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Contributing | Azure SDK for C ">
    <meta name="generator" content="docfx 2.43.2.0">
    
    <link rel="shortcut icon" href="https://c.s-microsoft.com/favicon.ico?v2">
    <link rel="stylesheet" href="styles/docfx.vendor.css">
    <link rel="stylesheet" href="styles/docfx.css">
    <link rel="stylesheet" href="styles/main.css">
    <meta property="docfx:navrel" content="navtoc.html">
    <meta property="docfx:tocrel" content="toc.html">
    
    
    <meta property="docfx:newtab" content="true">
  
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async="" src="https://www.googletagmanager.com/gtag/js?id=UA-62780441-44"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
  
      gtag('config', 'UA-62780441-44');
    </script>
  </head>
  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <a class="navbar-brand" href="index.html">
                <img id="logo" class="svg" src="logo.svg" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="">
<h1 id="contributing">Contributing</h1>

<p>This project welcomes contributions and suggestions.  Most contributions require you to agree to a
Contributor License Agreement (CLA) declaring that you have the right to, and actually do, grant us
the rights to use your contribution. For details, visit <a href="https://cla.microsoft.com">https://cla.microsoft.com</a>.</p>
<p>When you submit a pull request, a CLA-bot will automatically determine whether you need to provide
a CLA and decorate the PR appropriately (e.g., label, comment). Simply follow the instructions
provided by the bot. You will only need to do this once across all repos using our CLA.</p>
<p>This project has adopted the <a href="https://opensource.microsoft.com/codeofconduct/">Microsoft Open Source Code of Conduct</a>.
For more information see the <a href="https://opensource.microsoft.com/codeofconduct/faq/">Code of Conduct FAQ</a> or
contact <a href="mailto:opencode@microsoft.com">opencode@microsoft.com</a> with any additional questions or comments.</p>
<h2 id="additional-helpful-links-for-contributors">Additional Helpful Links for Contributors</h2>
<p>Many people all over the world have helped make this project better.  You'll want to check out:</p>
<ul>
<li><a href="https://github.com/azure/azure-sdk-for-c/issues?q=is%3Aopen+is%3Aissue+label%3Aup-for-grabs">What are some good first issues for new contributors to the repo?</a></li>
<li><a href="#developer-guide">How to build and test your change</a></li>
<li><a href="#pull-requests">How you can make a change happen!</a></li>
<li>Conceptual Topics in the detailed <a href="https://azure.github.io/azure-sdk-for-c">Azure SDK for Embedded C docs</a>.</li>
</ul>
<h2 id="community">Community</h2>
<ul>
<li>Chat with other community members <a href="https://gitter.im/azure/azure-sdk-for-c?utm_source=badge&amp;utm_medium=badge&amp;utm_campaign=pr-badge&amp;utm_content=badge"><img src="https://badges.gitter.im/Join%20Chat.svg" alt="Join the chat at https://gitter.im/azure/azure-sdk-for-c"></a></li>
</ul>
<h2 id="reporting-security-issues-and-security-bugs">Reporting Security Issues and Security Bugs</h2>
<p>Security issues and bugs should be reported privately, via email, to the Microsoft Security Response Center (MSRC) <a href="mailto:secure@microsoft.com">secure@microsoft.com</a>. You should receive a response within 24 hours. If for some reason you do not, please follow up via email to ensure we received your original message. Further information, including the MSRC PGP key, can be found in the <a href="https://www.microsoft.com/msrc/faqs-report-an-issue">Security TechCenter</a>.</p>
<h2 id="how-to-contribute-to-the-azure-sdk-for-embedded-c">How to Contribute to the Azure SDK for Embedded C</h2>
<p>There are many ways that you can contribute to the Azure SDK for Embedded C project.</p>
<ul>
<li><p>For reporting bugs, requesting features, or asking for support, please file an issue in the <a href="https://github.com/Azure/azure-sdk-for-c/issues">issues</a> section of the project.</p>
</li>
<li><p>If you would like to become an active contributor to this project please follow the instructions provided in <a href="https://opensource.microsoft.com/collaborate">Microsoft Azure Projects Contribution Guidelines</a>.</p>
</li>
<li><p>To make code changes, or contribute something new, please follow the <a href="https://docs.github.com/articles/fork-a-repo/">GitHub Forks / Pull requests model</a>: Fork the repo, make the change and propose it back by submitting a pull request.</p>
</li>
<li><p>Refer to the <a href="https://github.com/Azure/azure-sdk-for-c/wiki">wiki</a> to learn about how Azure SDK for Embedded C generates lint checker, doxygen, and code coverage reports.</p>
</li>
</ul>
<h3 id="pull-requests">Pull Requests</h3>
<ul>
<li><strong>DO</strong> submit all code changes via pull requests (PRs) rather than through a direct commit. PRs will be reviewed and potentially merged by the repo maintainers after a peer review that includes at least one maintainer.</li>
<li><strong>DO NOT</strong> submit &quot;work in progress&quot; PRs.  A PR should only be submitted when it is considered ready for review and subsequent merging by the contributor.</li>
<li><strong>DO</strong> give PRs short-but-descriptive names (e.g. &quot;Improve code coverage for Azure.Core by 10%&quot;, not &quot;Fix #1234&quot;)</li>
<li><strong>DO</strong> refer to any relevant issues and include <a href="https://docs.github.com/articles/closing-issues-via-commit-messages/">keywords</a> that automatically close issues when the PR is merged.</li>
<li><strong>DO</strong> tag any users that should know about and/or review the change.</li>
<li><strong>DO</strong> ensure each commit successfully builds.  The entire PR must pass all tests in the Continuous Integration (CI) system before it'll be merged.</li>
<li><strong>DO</strong> address PR feedback in an additional commit(s) rather than amending the existing commits, and only rebase/squash them when necessary.  This makes it easier for reviewers to track changes.</li>
<li><strong>DO</strong> assume that <a href="https://github.com/blog/2141-squash-your-commits">&quot;Squash and Merge&quot;</a> will be used to merge your commit unless you request otherwise in the PR.</li>
<li><strong>DO NOT</strong> fix merge conflicts using a merge commit. Prefer <code>git rebase</code>.</li>
<li><strong>DO NOT</strong> mix independent, unrelated changes in one PR. Separate real product/test code changes from larger code formatting/dead code removal changes. Separate unrelated fixes into separate PRs, especially if they are in different assemblies.</li>
</ul>
<h4 id="merging-pull-requests-for-project-contributors-with-write-access">Merging Pull Requests (for project contributors with write access)</h4>
<ul>
<li><p><strong>DO</strong> use <a href="https://github.com/blog/2141-squash-your-commits">&quot;Squash and Merge&quot;</a> by default for individual contributions unless requested by the PR author.
Do so, even if the PR contains only one commit. It creates a simpler history than &quot;Create a Merge Commit&quot;.
Reasons that PR authors may request &quot;Merge and Commit&quot; may include (but are not limited to):</p>
<ul>
<li>The change is easier to understand as a series of focused commits. Each commit in the series must be buildable so as not to break <code>git bisect</code>.</li>
<li>Contributor is using an e-mail address other than the primary GitHub address and wants that preserved in the history. Contributor must be willing to squash
the commits manually before acceptance.</li>
</ul>
</li>
</ul>
<h3 id="developer-guide">Developer Guide</h3>
<h4 id="prerequisites">Prerequisites</h4>
<ul>
<li><a href="https://cmake.org/download/">CMake</a> version 3.10 or later</li>
<li>C compiler: <a href="https://visualstudio.microsoft.com/downloads/#build-tools-for-visual-studio-2019">MSVC</a>, <a href="https://gcc.gnu.org/">gcc</a> or <a href="https://clang.llvm.org/">clang</a> are recommended</li>
<li><a href="https://git-scm.com/downloads">git</a> to clone our Azure SDK repository with the desired tag</li>
<li><a href="https://cmocka.org/">cmocka</a> for building and running unit tests. By default, building unit tests is disabled, so, unless you want to add unit tests or run then, you don't need to install this.</li>
<li><a href="https://curl.haxx.se/download.html">libcurl</a> which is used as an http stack. You don't need to install libcurl if you are not building samples, or if you will provide another HTTP stack implementation. The minimum required version of libcurl is 7.1.</li>
</ul>
<blockquote>
<p>Note: Using libcurl requires a global init and clean up that needs to happen in application code. See more info in Running Samples section.</p>
</blockquote>
<ul>
<li><a href="https://www.doxygen.nl/download.html">doxygen</a> if you need to generate and view documentation.</li>
<li><a href="https://releases.llvm.org/download.html#9.0.0">clang-format</a> to format the code properly. Note that you NEED <code>clang-format</code> from Clang version 9.0.0. Subsequent versions format code differently and we settled on this one for consistency. If you download the pre-built binaries version, it should be located at <code>&lt;expanded clang dir&gt;/bin/clang-format</code>.</li>
</ul>
<h3 id="running-tests">Running Tests</h3>
<h4 id="unit-tests">Unit Tests</h4>
<p>See <a href="https://github.com/Azure/azure-sdk-for-c#cmake-options">CMake options</a> to learn about how to build and run unit tests.</p>
<p>After compiling project with unit test enabled, run tests with:</p>
<pre><code class="lang-bash">cmake -DUNIT_TESTING=ON ..
cmake --build .
# ctest will call and run tests
# -V runs tests in verbose mode to show more info about tests
ctest -V
</code></pre>
<h4 id="test-with-mocked-functions">Test with Mocked Functions</h4>
<p>Some test uses linker option ld to wrap functions and mock the implementation for it to do unit testing. Specially for PAL-related functions, mocking functions becomes a convenient way to break dependency between functions.</p>
<p>In order to run this tests, GCC is required (or any compiler that supports -ld linker flag).</p>
<p>To enable building project and linking with this option, as well as adding tests using mocked functions, add option <code>-DUNIT_TESTING_MOCKS=ON</code> next to <code>-DUNIT_TESTING=ON</code> to cmake cache generation (see below example)</p>
<pre><code class="lang-cmake">cmake -DUNIT_TESTING=ON -DUNIT_TESTING_MOCKS=ON ..
</code></pre>
<h3 id="fix-code-formatting">Fix Code Formatting</h3>
<p>Run the following command from the root of the sdk with <code>clang-format</code> version 9.0.0.</p>
<pre><code class="lang-bash">find . \( -iname '*.h' -o -iname '*.c' \) -exec clang-format -i {} \; 
</code></pre>
<p>Commit the resulting code formatting changes if there are any.</p>
<h3 id="build-docs">Build Docs</h3>
<p>Running below command from root folder will create a new folder <code>docs</code> containing html file with documentation about CORE headers. Make sure you have <code>doxygen</code> version <em>1.8.18</em> or later installed on the system.</p>
<pre><code class="lang-bash">doxygen doc/Doxyfile
</code></pre>
<h3 id="code-coverage-reports">Code Coverage Reports</h3>
<p>Code coverage reports can be generated after running unit tests for each project. Follow below instructions will generate code coverage reports.</p>
<h4 id="requirements">Requirements</h4>
<ul>
<li><strong>gcc</strong> - clang/MSVC are not supported</li>
<li><strong>gcovr</strong> - if not already installed, can install with <code>sudo apt install gcovr</code></li>
<li><strong>lcov</strong> - if not already installed, can install with <code>sudo apt install lcov</code></li>
<li><strong>Debug</strong> - Build files for debug <code>cmake -DCMAKE_BUILD_TYPE=Debug ..</code></li>
<li><strong>cmocka / Unit Test Enabled</strong> - Build cmocka unit tests <code>cmake --DUNIT_TESTING=ON ..</code></li>
<li><strong>environment variable</strong> - <code>set AZ_SDK_CODE_COV=1</code></li>
</ul>
<pre><code class="lang-bash"># from source code root, create a new folder to build project:
mkdir build
cd build

# set env variable to enable building code coverage
export AZ_SDK_CODE_COV=1
# generate cmake files with Debug and cmocka unit tests enabled
cmake -DUNIT_TESTING=ON -DCMAKE_BUILD_TYPE=Debug ..
# build
cmake --build .

## There are 3 available reports to generate for each project:
# 1. using lcov. Html files grouped by folders. Make sure lcov
# is installed.
make ${project_name}_cov //i.e. az_core_cov or az_iot_common_cov

# 2. using gcov. Html page with all results in one page. Make sure
# gcov is installed.
make ${project_name}_cov_html //i.e. az_core_cov_html or az_iot_common_cov_html

# 3. using gcov. XML file with all results. Make sure
# gcov is installed.
make ${project_name}_cov_xml //i.e. az_core_cov_xml or az_iot_common_cov_xml

## Code Coverage is available for these projects:
#  az_core
#  az_iot_common
#  az_iot_hub
#  az_iot_provisioning
#  az_iot_adu

&gt; Note: If `make` fails with &quot;project not found&quot; it's likely you are not using `gcc`. Use `sudo update-alternatives --config c+++` and `sudo update-alternatives --config cc` to switch to gcc.
</code></pre>
<h2 id="samples">Samples</h2>
<h3 id="third-party-dependencies">Third-party dependencies</h3>
<p>Third party libraries should only be included in samples when necessary to demonstrate usage of an Azure SDK package; they should not be suggested or endorsed as alternatives to the Azure SDK.</p>
<p>When code samples take dependencies, readers should be able to use the material without significant license burden or research on terms. This goal requires restricting dependencies to certain types of open source or commercial licenses.</p>
<p>Samples may take the following categories of dependencies:</p>
<ul>
<li><p><strong>Open-source</strong> : Open source offerings that use an <a href="https://opensource.org/licenses">Open Source Initiative (OSI) approved license</a>. Any component whose license isn't OSI-approved is considered a commercial offering. Prefer OSS projects that are members of any of the <a href="https://opensource.microsoft.com/ecosystem/">OSS foundations that Microsoft is part of</a>. Prefer permissive licenses for libraries, like <a href="https://opensource.org/licenses/MIT">MIT</a> and <a href="https://opensource.org/licenses/Apache-2.0">Apache 2</a>. Copy-left licenses like <a href="https://opensource.org/license/gpl-3-0">GPL</a> are acceptable for tools, and OSs. <a href="https://github.com/kubernetes/kubernetes">Kubernetes</a>, <a href="https://github.com/torvalds/linux">Linux</a>, and <a href="https://github.com/JamesNK/Newtonsoft.Json">Newtonsoft.Json</a> are examples of this license type. Links to open source components should be to where the source is hosted, including any applicable license, such as a GitHub repository (or similar).</p>
</li>
<li><p><strong>Commercial</strong>: Commercial offerings that enable readers to learn from our content without unnecessary extra costs. Typically, the offering has some form of a community edition, or a free trial sufficient for its use in content. A commercial license may be a form of dual-license, or tiered license. Links to commercial components should be to the commercial site for the software, even if the source software is hosted publicly on GitHub (or similar).</p>
</li>
<li><p><strong>Dual licensed</strong>: Commercial offerings that enable readers to choose either license based on their needs. For example, if the offering has an OSS and commercial license, readers can  choose between them. <a href="https://github.com/mysql/mysql-server">MySql</a> is an example of this license type.</p>
</li>
<li><p><strong>Tiered licensed</strong>: Offerings that enable readers to use the license tier that corresponds to their characteristics. For example, tiers may be available for students, hobbyists, or companies with defined revenue  thresholds. For offerings with tiered licenses, strive to limit our use in tutorials to the features available in the lowest tier. This policy enables the widest audience for the article. <a href="https://www.docker.com/">Docker</a>, <a href="https://duendesoftware.com/products/identityserver">IdentityServer</a>, <a href="https://sixlabors.com/products/imagesharp/">ImageSharp</a>, and <a href="https://visualstudio.com">Visual Studio</a> are examples of this license type.</p>
</li>
</ul>
<p>In general, we prefer taking dependencies on licensed components in the order of the listed categories. In cases where the category may not be well known, we'll document the category so that readers understand the choice that they're making by using that dependency.</p>
<!-- LINKS -->
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            Azure SDK for C
            
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="styles/docfx.js"></script>
    <script type="text/javascript" src="styles/main.js"></script>
  </body>
</html>
