# MQTT Connection Management

## Connection HFSM

The following diagram describes the hierarchical finite state machine implementing connection management with the following functionality:

1. Credential rotation
1. Retry-policy based back-off timer
1. Robust and reliable event processing:
    1. State resyncrhonization in case of dropped/missed events.
    1. Reliable execution for any type of event (unexpected/unknown events result in maintaining the Faulted state to avoid further state corruption).

![event_pipeline.puml](https://www.plantuml.com/plantuml/png/nLPVJzim47_FfxWtcb4AsxGNO1LL6qIrjOKsJ6ph6fd458lKhco7WYQ--so7ZDHnoRezZ0SQd-_kT_UxFyc9a8ZBR952br6AOqaOZSvE9mFFsu6E4DbYgKNYK1qFMd19xoXRKS3tc4e1Y6EuONo5U88JQ10AyXOJ3eoJEQ4eXOJmt6SJC55t70YzPXbDb0gmJ9fdlwMSlst1u28Ce-veE0owOJGEBe08c6U88ognSYyPS2oMJ1clbA_2uRhLv3mQVGBc40VZiSPvru9Py2KOXjex0d7Bk8mpgRtZ1woUiCu1f48LH4SEI0WM4oJnCsvkVSFPmcZ66UUOIX1IgK23Ca2np52QSwHHXFvLoPeytxVqEOcUUMZcfu8AmsWcJBRc1WXL12-GYKGoWuYMIq3gYcAvOlpEiA9PliVfOylpJ22bSWuGHNEyq47yz03WET9-ac9zD0zm2CVNxSwto2GNQV8-5EprHyEe-taq2NHDZlUls_j0vfHnV6IP6yfx_Kc9zNNr4lefobB5Q5aqaOWhKHwa-LlFXCwBYv8eHrQvySSSIqYsN24PtqQA5YmR_cQZ1o9jcpcMaIGBx3IhoNAcEcmqzjpHuyHsY9DAx4wLgGIEurmGnIoZ4lEF1pRCk509LVGiayLrvS8DwjRKs6O_WEQ4rsXMejpThR78becAFOevJbH01AMYuTUOa1jeL81se0s3pjNlSU-4OJ0u3oS-p7Iroeqy3iBnroYuEkjSJiAW5_M7lHh4pTUEBgeXQiincpbwpIvyZuYuEY25r3qZfPg2swG-DvU-OnKRy_KTrx2pKldwRhT_jPPU6Fh-vWVijMiMoDwB1avUpsDArtPtmswkqNamrFg-4wUzeHrSRoeDjo7OVs5eIhSenGih_n7spzVlbBfgOms-6dV_o1sEAvPgnHmHXVr1CBeCtPcwNJ_f_yKBpnvFvxglwBkvBxhGdWdBtjtZJLXxaTMRA3tBnYl6JfNE-i9GWYqJs8RHmdM1-tgpk0VPRb-bNN5UVBWOzoRd9fGRODslKV2z9-z4IRD5wlq2)
