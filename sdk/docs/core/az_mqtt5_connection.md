# MQTT Connection Management

## Connection HFSM

The following diagram describes the hierarchical finite state machine implementing connection management with the following functionality:

1. Credential rotation
1. Retry-policy based back-off timer
1. Robust and reliable event processing:
    1. State resyncrhonization in case of dropped/missed events.
    1. Reliable execution for any type of event (unexpected/unknown events result in maintaining the Faulted state to avoid further state corruption).

![event_pipeline.puml](https://www.plantuml.com/plantuml/png/nLPDSzem4BtxL-mjq12IjjDBaZ9XY3DbMZ01fzCF6ezYAqGJa1X93ibqyj-xaZ7W3t3I7ie1xDNkUxjlLn9dIXEfuzaKEe9p6cecUF3fOjHpd3reAnNFviQaZl7rg0bN_9wB1GVwGBbMG2I5Mo4NH4OqWXhZeEyeao0acp1EfX0ncM0sW39Say3uZOXvX2uWOcsVwqq4Vzk4tgNl1nslttSxVZ1qBu4fcCH44gufmci1aggvmE05OgM0sQZH8F0-6_22sHqE3S-x9boxNzs-Rz09g3iXTHXhWquVAJvHKmDeP5NCP0v4AH4oekcIDuc-bM9cFSDOIXG3K4YChN419DGnrcurCYpA_6AnjixtJVCU1KiT6ibRAeLLD5P9jMO5zKA1PyHcWZR3IEPp8BZ4gLu8UMzLCIe_qEbJqt6IHDRjx15E9dHcalZj07uIXsuqfVRLFC0ndDwqsZy2MrnWnFkGgjVr-a7dYpToJKzE3szQXy0cN4XwaWktafztHnkgPzqts2z8F4L5DqqZCubOUPBasfvMmYUhXRMfWlaQk-uDdN94fCy18hl5GwtaKu9GwZBMA7gO688G6wUf_7YKfnccBZwRKUpmQZc_i9sqn7DiHqtYnA99LdWMijpVhuY8vn7c7eIIHfWG8rDLgrU4i5ke5OZse0MzzhVL5cpxljiR-ADwsfFTc5LQFJATIAMqc5TByPhXlYwPfdnhpvaAYsEPiHQQkj4rs1cogxOI_v83S1c-URBK2bMvb_LTiAyy3DOA_Npp2mvQ5TlsOEsHRhfjTOnvviIibVZLIobQMoQXx6emJDlo_0TnqjnVreMr8F-HziLdwvXdsjBr4b6JV8QkF_mUTFldzPFoP4epAVIh91-_stEzAtz7dGNeP_kTtY_vVLbsaXVyjoll3Tn-OJCKuak6jW6PEwew1FroCSvglw5GsGiT3NzJm0iLJQ5JtjsZaj_1wQXaPtSqA68l_oPOT5jo0pRxduMr3dNdsJb3A_wb_GC0)
