parameters:
  BuildArgs: ''

steps:
  # Disable CMake tasks until regression is fixed
  # - task: CMake@1
  #   inputs:
  #     cmakeArgs: --version
  #   displayName: cmake version
  # - task: CMake@1
  #   inputs:
  #     cmakeArgs: ${{ parameters.BuildArgs }} ..
  #   displayName: cmake generate
  # - task: CMake@1
  #   inputs:
  #     cmakeArgs: --build .
  #   displayName: cmake build

  - script: mkdir build
    displayName: create working directory

  - script: cmake --version
    workingDirectory: build
    displayName: cmake --version

  - script: cmake ${{ parameters.BuildArgs }} ..
    workingDirectory: build
    displayName: cmake generate

  - script: cmake --build .
    workingDirectory: build
    displayName: cmake build